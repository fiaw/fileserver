docker run -it --rm -v "$PWD":/app -w /app alpine:latest sh
apk add g++ musl-dev jsoncpp-dev openssl-dev zlib-dev zstd-dev libzip-dev sqlite-dev bzip2-dev
g++ -static -std=c++20 -I. -o x fileserver.cpp \
  -ljsoncpp -lssl -lcrypto -lz -lzstd -ldl -lpthread -lzip -lsqlite3 -lbz2



如果你追求 **真正干净的静态链接环境**，建议使用 Alpine Linux 容器：

#### 🐳 示例 Dockerfile

```
Dockerfile复制编辑FROM alpine:latest

RUN apk add --no-cache g++ musl-dev libzip-dev zlib-dev zstd-dev \
    bzip2-dev openssl-dev sqlite-dev jsoncpp-dev

WORKDIR /app
COPY fileserver.cpp .

RUN g++ -static -std=c++20 -o x fileserver.cpp \
    -ljsoncpp -lssl -lcrypto -lz -lzstd -lbz2 -lpthread -lzip -lsqlite3
```

然后在项目目录运行：

```
docker build -t static-cpp .
docker run --rm -v $PWD:/output -w /output static-cpp cp /app/x .
```

这将在你当前目录生成一个真正的 **完全静态链接的 C++ 可执行文件**。